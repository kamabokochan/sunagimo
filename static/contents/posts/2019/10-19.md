# nuxtjs/markdownitでブログを作った

2019/10/19

## markdownit
[markdown-it.github.io](https://markdown-it.github.io/markdown-it/)

markdownitは markdown => html の変換を行ってくれるparserです。

### install
```bash
yarn add @nuxtjs/markdownit
```

### nuxtconfigに追記する
```javascript
...
modules: [
  '@nuxtjs/markdownit'
]
...
```

### vueファイルにMarkdownを書いていく
```temp
<template lang="md">
  ...
</template>
```

## highlight.jsを入れる
[https://highlightjs.org/](https://highlightjs.org/)

### install
```bash
yarn add highlight.js
```

### nuxtconfigに追記する
```javascript
...
css: [ // お好みのテーマで
  '~/node_modules/highlight.js/styles/hopscotch.css'
]
...
markdownit: {
  // injected: true,
  breaks: true,
  langPrefix: "hljs language-", // コードブロックのCSSクラス名の接頭辞に付加
  linkify: true,
  highlight: (str: any, lang: any) => {
    const hljs = require('highlight.js');
    if (lang) {
      try {
        return hljs.highlight(lang, str, true).value;
      } catch (err) { }
    }
    // 言語設定がなければplaintextを適用
    return hljs.highlight('plaintext', str, true).value;
  }
}
...
```

langPrefixにhljsを入れておかないと、背景色が適用されない。
参照: [https://github.com/jonschlinkert/remarkable/issues/131](https://github.com/jonschlinkert/remarkable/issues/131)

これで以下のようにコードにハイライトがつくようになります。やったね！
javascript
```javascript
const dog: string = 'pochi'
```

typescriptもあるよ！

typescript
```typescript
const dog: string = 'pochi'
```